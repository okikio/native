{"version":3,"sources":["../../ts/transitions.ts"],"names":[],"mappings":"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","file":"transitions.js","sourcesContent":["import { Transition, ITransitionData } from \"./api.js\";\r\n\r\n//== Transitions\r\nexport class Fade extends Transition {\r\n    protected name = \"default\";\r\n    protected duration = 500;\r\n\r\n    out({ from }: ITransitionData) {\r\n        let { duration } = this;\r\n        let fromWrapper = from.getWrapper();\r\n        window.scroll({\r\n            top: 0,\r\n            behavior: 'smooth'  // ðŸ‘ˆ \r\n        });\r\n        return new Promise(resolve => {\r\n            let animation = fromWrapper.animate([\r\n                { opacity: 1 },\r\n                { opacity: 0 },\r\n            ], {\r\n                duration,\r\n                fill: \"forwards\",\r\n                easing: \"ease\"\r\n            });\r\n            animation.onfinish = () => {\r\n                // fromWrapper.style.opacity = \"0\";\r\n                window.scrollTo(0, 0);\r\n                resolve();\r\n            };\r\n        });\r\n    }\r\n\r\n    in({ to }: ITransitionData) {\r\n        let { duration } = this;\r\n        let toWrapper = to.getWrapper();\r\n        return new Promise(resolve => {\r\n            let animation = toWrapper.animate([\r\n                { opacity: 0 },\r\n                { opacity: 1 },\r\n            ], {\r\n                duration,\r\n                fill: \"forwards\",\r\n                easing: \"ease\"\r\n            });\r\n            animation.onfinish = () => {\r\n                // toWrapper.style.opacity = \"1\";\r\n                resolve();\r\n            };\r\n        });\r\n    }\r\n}\r\n\r\nexport class Slide extends Transition {\r\n    protected name = \"slide\";\r\n    protected duration = 500;\r\n    protected direction: string = \"right\";\r\n\r\n    out({ from }: ITransitionData) {\r\n        let { duration } = this;\r\n        let fromWrapper = from.getWrapper();\r\n        window.scroll({\r\n            top: 0,\r\n            behavior: 'smooth'  // ðŸ‘ˆ \r\n        });\r\n        return new Promise(resolve => {\r\n            let animation = fromWrapper.animate([\r\n                { transform: \"translateX(0%)\", opacity: 1 },\r\n                { transform: `translateX(${this.direction === \"left\" ? \"-\" : \"\"}25%)`, opacity: 0 },\r\n            ], {\r\n                duration,\r\n                // fill: \"forwards\",\r\n                easing: \"cubic-bezier(0.64, 0, 0.78, 0)\" // ease-in-quint\r\n            });\r\n            animation.onfinish = () => {\r\n                fromWrapper.style.opacity = \"0\";\r\n                resolve();\r\n            };\r\n        });\r\n    }\r\n\r\n    in({ to }: ITransitionData) {\r\n        let toWrapper = to.getWrapper();\r\n        return new Promise(resolve => {\r\n            let animation = toWrapper.animate([\r\n                { transform: `translateX(${this.direction === \"left\" ? \"\" : \"-\"}25%)`, opacity: 0 },\r\n                { transform: \"translateX(0%)\", opacity: 1 },\r\n            ], {\r\n                duration: 750,\r\n                easing: \"cubic-bezier(0.22, 1, 0.36, 1)\" // ease-out-quint\r\n            });\r\n            animation.onfinish = () => {\r\n                toWrapper.style.opacity = \"1\";\r\n                resolve();\r\n            };\r\n        });\r\n    }\r\n}\r\n\r\nexport class SlideLeft extends Slide {\r\n    protected name = \"slide-left\";\r\n    protected duration = 500;\r\n    protected direction: string = \"left\";\r\n}\r\n\r\nexport class SlideRight extends Slide {\r\n    protected name = \"slide-right\";\r\n    protected duration = 500;\r\n    protected direction: string = \"right\";\r\n}\r\n\r\nexport class BigTransition extends Transition {\r\n    protected name = \"big\";\r\n    protected delay = 200;\r\n    protected durationPerAnimation = 700;\r\n    protected mainElement: HTMLElement;\r\n    protected verticalElements: HTMLDivElement[];\r\n    protected horizontalElements: HTMLDivElement[];\r\n    protected maxLength: number;\r\n    protected spinnerElement: HTMLElement;\r\n\r\n    public boot() {\r\n        this.mainElement = document.getElementById('big-transition');\r\n        this.spinnerElement = this.mainElement.querySelector('.spinner');\r\n        this.horizontalElements = [...this.mainElement.querySelector('#big-transition-horizontal').querySelectorAll('div')];\r\n        this.maxLength = this.horizontalElements.length;\r\n    }\r\n\r\n    out({ from }: ITransitionData) {\r\n        let { durationPerAnimation: duration, delay } = this;\r\n        let fromWrapper = from.getWrapper();\r\n        window.scroll({\r\n            top: 0,\r\n            behavior: 'smooth'  // ðŸ‘ˆ \r\n        });\r\n\r\n        return new Promise(resolve => {\r\n            let wrapperAnim = fromWrapper.animate([\r\n                { opacity: 1 },\r\n                { opacity: 0 },\r\n            ], {\r\n                duration,\r\n                fill: \"forwards\",\r\n                easing: \"ease\"\r\n            });\r\n            // wrapperAnim.onfinish = () => {\r\n            //     fromWrapper.style.opacity = \"0\";\r\n            // };\r\n\r\n            this.mainElement.style.opacity = \"1\";\r\n            this.mainElement.style.visibility = \"visible\";\r\n\r\n            let count = 1;\r\n            for (let el of this.horizontalElements) {\r\n                let animation = el.animate([\r\n                    { transform: \"scaleX(0)\" },\r\n                    { transform: \"scaleX(1)\" },\r\n                ], {\r\n                    duration,\r\n                    fill: \"forwards\",\r\n                    delay: delay * count,\r\n                    easing: \"ease\"\r\n                });\r\n                // animation.onfinish = () => {\r\n                //     el.style.transform = \"scaleX(1)\";\r\n                // };\r\n                count++;\r\n            }\r\n\r\n            window.setTimeout(() => {\r\n                let loaderDuration = 500;\r\n                this.spinnerElement.style.visibility = \"visible\";\r\n\r\n                let animation = this.spinnerElement.animate([\r\n                    { opacity: 0 },\r\n                    { opacity: 1 },\r\n                ], {\r\n                    duration: loaderDuration,\r\n                    fill: \"forwards\",\r\n                    easing: \"ease\"\r\n                });\r\n\r\n                animation.onfinish = () => {\r\n                    // this.spinnerElement.style.opacity = \"1\";\r\n\r\n                    let animation = this.spinnerElement.animate([\r\n                        { opacity: 1 },\r\n                        { opacity: 0 },\r\n                    ], {\r\n                        duration: loaderDuration,\r\n                        fill: \"forwards\",\r\n                        delay: 3000,\r\n                        easing: \"ease\"\r\n                    });\r\n\r\n                    animation.onfinish = () => {\r\n                        // this.spinnerElement.style.opacity = \"0\";\r\n                        this.spinnerElement.style.visibility = \"hidden\";\r\n                        resolve();\r\n                    };\r\n                };\r\n            }, this.maxLength * delay + duration);\r\n        });\r\n    }\r\n\r\n    in({ to }: ITransitionData) {\r\n        let { durationPerAnimation: duration, delay } = this;\r\n        let toWrapper = to.getWrapper();\r\n        return new Promise(resolve => {\r\n            let wrapperAnim = toWrapper.animate([\r\n                { opacity: 0 },\r\n                { opacity: 1 },\r\n            ], {\r\n                duration,\r\n                fill: \"forwards\",\r\n                easing: \"ease\"\r\n            });\r\n            wrapperAnim.onfinish = () => {\r\n                // toWrapper.style.opacity = \"1\";\r\n            };\r\n\r\n            let count = 1;\r\n            for (let el of this.horizontalElements) {\r\n                let animation = el.animate([\r\n                    { transform: \"scaleX(1)\" },\r\n                    { transform: \"scaleX(0)\" },\r\n                ], {\r\n                    duration,\r\n                    fill: \"forwards\",\r\n                    delay: delay * count,\r\n                    easing: \"ease\"\r\n                });\r\n                animation.onfinish = () => {\r\n                    // el.style.transform = \"scaleX(0)\";\r\n                };\r\n                count++;\r\n            }\r\n\r\n            window.setTimeout(() => {\r\n                this.mainElement.style.opacity = \"0\";\r\n                this.mainElement.style.visibility = \"hidden\";\r\n                resolve();\r\n            }, this.maxLength * delay + duration);\r\n        });\r\n    }\r\n}\r\n\r\n"]}