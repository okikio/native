!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).native={})}(this,(function(t){"use strict";const e={wrapperAttr:"wrapper",headers:[],preventSelfAttr:'prevent="self"',preventAllAttr:'prevent="all"',transitionAttr:"transition",timeout:2e3,maxPages:5,resizeDelay:100,onTransitionPreventClick:!0,cacheIgnore:!1,prefetchIgnore:!1,preventURLs:[],stickyScroll:!1,forceOnError:!0,ignoreHashAction:!1,transitions:[]},i=t=>Object.assign({...e},t),r=(t,e,i=!0)=>{let{prefix:r}=t,s=`data${r?"-"+r:""}-${t[e]}`;return i?`[${s}]`:s};class s{constructor(t){this.map=new Map(t)}getMap(){return this.map}get(t){return this.map.get(t)}keys(){return Array.from(this.map.keys())}values(){return Array.from(this.map.values())}set(t,e){return this.map.set(t,e),this}add(t){let e=this.size;return this.set(e,t),this}get size(){return this.map.size}get length(){return this.map.size}last(t=1){let e=this.keys()[this.size-t];return this.get(e)}delete(t){return this.map.delete(t)}remove(t){return this.map.delete(t),this}clear(){return this.map.clear(),this}has(t){return this.map.has(t)}entries(){return this.map.entries()}forEach(t,e){return this.map.forEach(t,e),this}[Symbol.iterator](){return this.entries()}}const n=(t,e,...i)=>{t.forEach((t=>{t[e](...i)}))};class a{constructor(){}install(){}register(t,e){return this.manager=t,this.app=t.app,this.config=t.config,this.emitter=t.emitter,this.key=e,this.install(),this}uninstall(){}unregister(){this.uninstall(),this.manager.remove(this.key),this.key=null,this.manager=null,this.app=null,this.config=null,this.emitter=null}}class o extends s{constructor(t){super(),this.app=t,this.config=t.config,this.emitter=t.emitter}set(t,e){return super.set(t,e),e.register(this,t),this}}const h=(t=window.location.href)=>t instanceof URL?t:new URL(t,window.location.origin),l=t=>{let e=h(t);return`${e.pathname}${e.hash}`},c=t=>h(t).toString().replace(/(\/#.*|\/|#.*)$/,""),u=(t,e)=>c(t)===c(e);class p extends a{init(){}boot(){this.initEvents()}initEvents(){}stopEvents(){}stop(){this.stopEvents(),this.unregister()}}class g extends o{constructor(t){super(t)}init(){return n(this,"init"),this}boot(){return n(this,"boot"),this}stop(){return n(this,"stop"),this}}const f=(t=window.scrollX,e=window.scrollY)=>({x:t,y:e}),d=(t={url:l(h()),index:0,transition:"default",data:{scroll:f(),trigger:"HistoryManager"}})=>t;const m=(t,e,i)=>{let r=[i,"",l(e.url)];if(window.history)switch(t){case"push":window.history.pushState.apply(window.history,r);break;case"replace":window.history.replaceState.apply(window.history,r)}};function w(t,e){void 0===e&&(e={});for(var i=function(t){for(var e=[],i=0;i<t.length;){var r=t[i];if("*"!==r&&"+"!==r&&"?"!==r)if("\\"!==r)if("{"!==r)if("}"!==r)if(":"!==r)if("("!==r)e.push({type:"CHAR",index:i,value:t[i++]});else{var s=1,n="";if("?"===t[o=i+1])throw new TypeError('Pattern cannot start with "?" at '+o);for(;o<t.length;)if("\\"!==t[o]){if(")"===t[o]){if(0==--s){o++;break}}else if("("===t[o]&&(s++,"?"!==t[o+1]))throw new TypeError("Capturing groups are not allowed at "+o);n+=t[o++]}else n+=t[o++]+t[o++];if(s)throw new TypeError("Unbalanced pattern at "+i);if(!n)throw new TypeError("Missing pattern at "+i);e.push({type:"PATTERN",index:i,value:n}),i=o}else{for(var a="",o=i+1;o<t.length;){var h=t.charCodeAt(o);if(!(h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||95===h))break;a+=t[o++]}if(!a)throw new TypeError("Missing parameter name at "+i);e.push({type:"NAME",index:i,value:a}),i=o}else e.push({type:"CLOSE",index:i,value:t[i++]});else e.push({type:"OPEN",index:i,value:t[i++]});else e.push({type:"ESCAPED_CHAR",index:i++,value:t[i++]});else e.push({type:"MODIFIER",index:i,value:t[i++]})}return e.push({type:"END",index:i,value:""}),e}(t),r=e.prefixes,s=void 0===r?"./":r,n="[^"+v(e.delimiter||"/#?")+"]+?",a=[],o=0,h=0,l="",c=function(t){if(h<i.length&&i[h].type===t)return i[h++].value},u=function(t){var e=c(t);if(void 0!==e)return e;var r=i[h],s=r.type,n=r.index;throw new TypeError("Unexpected "+s+" at "+n+", expected "+t)},p=function(){for(var t,e="";t=c("CHAR")||c("ESCAPED_CHAR");)e+=t;return e};h<i.length;){var g=c("CHAR"),f=c("NAME"),d=c("PATTERN");if(f||d){var m=g||"";-1===s.indexOf(m)&&(l+=m,m=""),l&&(a.push(l),l=""),a.push({name:f||o++,prefix:m,suffix:"",pattern:d||n,modifier:c("MODIFIER")||""})}else{var w=g||c("ESCAPED_CHAR");if(w)l+=w;else if(l&&(a.push(l),l=""),c("OPEN")){m=p();var y=c("NAME")||"",E=c("PATTERN")||"",A=p();u("CLOSE"),a.push({name:y||(E?o++:""),pattern:y&&!E?n:E,prefix:m,suffix:A,modifier:c("MODIFIER")||""})}else u("END")}}return a}function v(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function y(t){return t&&t.sensitive?"":"i"}function E(t,e,i){return function(t,e,i){void 0===i&&(i={});for(var r=i.strict,s=void 0!==r&&r,n=i.start,a=void 0===n||n,o=i.end,h=void 0===o||o,l=i.encode,c=void 0===l?function(t){return t}:l,u="["+v(i.endsWith||"")+"]|$",p="["+v(i.delimiter||"/#?")+"]",g=a?"^":"",f=0,d=t;f<d.length;f++){var m=d[f];if("string"==typeof m)g+=v(c(m));else{var w=v(c(m.prefix)),E=v(c(m.suffix));if(m.pattern)if(e&&e.push(m),w||E)if("+"===m.modifier||"*"===m.modifier){var A="*"===m.modifier?"?":"";g+="(?:"+w+"((?:"+m.pattern+")(?:"+E+w+"(?:"+m.pattern+"))*)"+E+")"+A}else g+="(?:"+w+"("+m.pattern+")"+E+")"+m.modifier;else g+="("+m.pattern+")"+m.modifier;else g+="(?:"+w+E+")"+m.modifier}}if(h)s||(g+=p+"?"),g+=i.endsWith?"(?="+u+")":"$";else{var T=t[t.length-1],R="string"==typeof T?p.indexOf(T[T.length-1])>-1:void 0===T;s||(g+="(?:"+p+"(?="+u+"))?"),R||(g+="(?="+p+"|"+u+")")}return new RegExp(g,y(i))}(w(t,i),e,i)}function A(t,e,i){return t instanceof RegExp?function(t,e){if(!e)return t;for(var i=/\((?:\?<(.*?)>)?(?!\?)/g,r=0,s=i.exec(t.source);s;)e.push({name:s[1]||r++,prefix:"",suffix:"",modifier:"",pattern:""}),s=i.exec(t.source);return t}(t,e):Array.isArray(t)?function(t,e,i){var r=t.map((function(t){return A(t,e,i).source}));return new RegExp("(?:"+r.join("|")+")",y(i))}(t,e,i):E(t,e,i)}const T=new DOMParser;class R extends a{constructor(t=h(),e=document){super(),this.url=h(t),"string"==typeof e?this.data=e:this.dom=e||document}async build(){if(this.dom instanceof Node||(this.dom=T.parseFromString(this.data,"text/html")),!(this.body instanceof Node)){let{title:t,head:e,body:i}=this.dom;this.title=t,this.head=e,this.body=i,this.wrapper=this.body.querySelector(this.wrapperAttr)}}install(){this.wrapperAttr=r(this.config,"wrapperAttr")}uninstall(){this.url=null,this.title=null,this.head=null,this.body=null,this.dom=null,this.wrapper=null,this.data=null,this.wrapperAttr=null}}const P=(t,e)=>{if("boolean"==typeof e)return e;let i=[];return!e.every((e=>null==A(e,i,{start:!1,end:!1}).exec(t)))},b=(t,e=window.location.hash)=>{try{let t="#"==e[0]?e:h(e).hash;if(t.length>1){let e=document.getElementById(t.slice(1));if(e){let{left:t,top:i}=e.getBoundingClientRect(),r=window.scrollX,s=window.scrollY;return f(t+r,i+s)}}}catch(t){console.warn("[hashAction] error",t)}return t??f(0,0)},x={name:"replace"};const N=({callback:t=(()=>{}),scope:e=null,name:i="event"})=>({callback:t,scope:e,name:i});class O extends s{constructor(t="event"){super(),this.name=t}}const _=t=>"object"==typeof t&&!Array.isArray(t)&&"function"!=typeof t;class C extends s{constructor(){super()}getEvent(t){let e=this.get(t);return e instanceof O?e:(this.set(t,new O(t)),this.get(t))}newListener(t,e,i){let r=this.getEvent(t);return r.add(N({name:t,callback:e,scope:i})),r}on(t,e,i){if(null==t||null==t)return this;"string"==typeof t&&(t=t.trim().split(/\s+/));let r,s,n=_(t),a=n?e:i;return n||(s=e),Object.keys(t).forEach((e=>{r=n?e:t[e],n&&(s=t[e]),this.newListener(r,s,a)}),this),this}removeListener(t,e,i){let r=this.get(t);if(r instanceof O&&e){let s=N({name:t,callback:e,scope:i});r.forEach(((t,e)=>{if(t.callback===s.callback&&t.scope===s.scope)return r.remove(e)}))}return r}off(t,e,i){if(null==t||null==t)return this;"string"==typeof t&&(t=t.trim().split(/\s+/));let r,s,n=_(t),a=n?e:i;return n||(s=e),Object.keys(t).forEach((e=>{r=n?e:t[e],n&&(s=t[e]),"function"==typeof s?this.removeListener(r,s,a):this.remove(r)}),this),this}once(t,e,i){if(null==t||null==t)return this;"string"==typeof t&&(t=t.trim().split(/\s+/));let r=_(t);return Object.keys(t).forEach((s=>{let n=r?s:t[s],a=r?t[s]:e,o=r?e:i,h=(...t)=>{a.apply(o,t),this.removeListener(n,h,o)};this.newListener(n,h,o)}),this),this}emit(t,...e){return null==t||null==t||("string"==typeof t&&(t=t.trim().split(/\s+/)),t.forEach((t=>{let i=this.get(t);i instanceof O&&i.forEach((t=>{let{callback:i,scope:r}=t;i.apply(r,e)}))}),this)),this}clear(){return n(this,"clear"),super.clear(),this}}t.AdvancedManager=o,t.App=class{constructor(t={}){this.canResize=!0,this.canScroll=!0,this._resize=this._resize.bind(this),this._scroll=this._scroll.bind(this),this._ready=this._ready.bind(this),this.register(t)}register(t={}){return this.config=i(t),this.emitter=new C,this.services=new g(this),this}_ready(){document.removeEventListener("DOMContentLoaded",this._ready),window.removeEventListener("load",this._ready),this.emitter.emit("READY ready")}_resize(){if(this.canResize){let t;this.canResize=!1,window.requestAnimationFrame((()=>{this.emitter.emit("RESIZE resize"),t=window.setTimeout((()=>{this.canResize=!0,t=window.clearTimeout(t)}),this.config.resizeDelay)}))}}_scroll(){this.canScroll&&(this.canScroll=!1,window.requestAnimationFrame((()=>{this.emitter.emit("SCROLL scroll"),this.canScroll=!0})))}get(t){return this.services.get(t)}set(t,e){return this.services.set(t,e),this}add(t){return this.services.add(t),this}boot(){return document.addEventListener("DOMContentLoaded",this._ready),window.addEventListener("load",this._ready),window.addEventListener("resize",this._resize,{passive:!0}),window.addEventListener("scroll",this._scroll,{passive:!0}),this.services.init(),this.services.boot(),this}stop(){return window.removeEventListener("resize",this._resize),window.removeEventListener("scroll",this._scroll),this.services.stop(),this.emitter.clear(),this}on(t,e){return this.emitter.on(t,e,this),this}off(t,e){return this.emitter.off(t,e,this),this}emit(t,...e){return this.emitter.emit(t,...e),this}},t.CONFIG_DEFAULTS=e,t.HistoryManager=class extends p{constructor(){super(...arguments),this.pointer=-1}init(){this.states=[];let t=d();this.add(t,"replace")}get(t){return this.states[t]}add(t,e="push"){let i=d(t),r=this.length;this.states.push({...i}),this.pointer=r;let s={index:this.pointer,states:[...this.states]};return m(e,i,s),this}remove(t){return t?this.states.splice(t,1):this.states.pop(),this.pointer--,this}replace(t){return this.states=t,this}set(t,e){return this.states[t]=e}get current(){return this.get(this.pointer)}get last(){return this.get(this.length-1)}get previous(){return this.pointer<1?null:this.get(this.pointer-1)}get length(){return this.states.length}},t.Manager=s,t.ManagerItem=a,t.PARSER=T,t.PJAX=class extends p{install(){super.install(),this.preventURLs=this.config.preventURLs,this.prefetchIgnore=this.config.prefetchIgnore,this.onTransitionPreventClick=this.config.onTransitionPreventClick,this.stickyScroll=this.config.stickyScroll,this.forceOnError=this.config.forceOnError,this.ignoreHashAction=this.config.ignoreHashAction}transitionStart(){this.isTransitioning=!0}transitionStop(){this.isTransitioning=!1}init(){this.onHover=this.onHover.bind(this),this.onClick=this.onClick.bind(this),this.onStateChange=this.onStateChange.bind(this)}boot(){super.boot()}getTransitionName(t){if(!t||!t.getAttribute)return null;let e=t.getAttribute(r(this.config,"transitionAttr",!1));return"string"==typeof e?e:null}validLink(t,e,i){let s=!window.history.pushState,n=!t||!i,a=e.metaKey||e.ctrlKey||e.shiftKey||e.altKey,o=t.hasAttribute("target")&&"_blank"===t.target,c=t.protocol!==location.protocol||t.hostname!==location.hostname,u="string"==typeof t.getAttribute("download"),p=t.matches(r(this.config,"preventSelfAttr")),g=Boolean(t.closest(r(this.config,"preventAllAttr"))),f=P(h(i).pathname,this.preventURLs),d=l(h())===l(h(i));return!(n||s||a||o||c||u||p||g||f||d)}getHref(t){return t&&t.tagName&&"a"===t.tagName.toLowerCase()&&"string"==typeof t.href?t.href:null}getLink(t){let e=t.target,i=this.getHref(e);for(;e&&!i;)e=e.parentNode,i=this.getHref(e);if(e&&this.validLink(e,t,i))return e}onClick(t){let e=this.getLink(t);if(!e)return;if(this.isTransitioning&&this.onTransitionPreventClick)return t.preventDefault(),void t.stopPropagation();let i=this.getHref(e);this.emitter.emit("ANCHOR_CLICK CLICK",t),this.go({href:i,trigger:e,event:t})}getDirection(t){return Math.abs(t)>1?t>0?"forward":"back":0===t?"popstate":t>0?"back":"forward"}force(t){window.location.assign(t)}go({href:t,trigger:e="HistoryManager",event:i}){if(this.isTransitioning&&!this.onTransitionPreventClick||!(this.manager.has("TransitionManager")&&this.manager.has("HistoryManager")&&this.manager.has("PageManager")))return void this.force(t);const r=this.manager.get("HistoryManager");let s,n=f(0,0),a=r.current,o=a.url;if(!u(o,t)){if(i&&i.state){this.emitter.emit("POPSTATE",i);let{state:t}=i,{index:o}=t,h=a.index-o;r.replace(t.states),r.pointer=o;let l=r.get(o);s=l.transition,n=l.data.scroll,e=this.getDirection(h),this.emitter.emit("back"===e?"POPSTATE_BACK":"POPSTATE_FORWARD",i)}else{s=this.getTransitionName(e),n=f();let a=d({url:t,transition:s,data:{scroll:n}});!this.stickyScroll&&(n=f(0,0)),r.add(a),this.emitter.emit("HISTORY_NEW_ITEM",i)}return i&&(i.stopPropagation(),i.preventDefault()),this.emitter.emit("GO",i),this.load({oldHref:o,href:t,trigger:e,transitionName:s,scroll:n})}}async load({oldHref:t,href:e,trigger:i,transitionName:r="default",scroll:s={x:0,y:0}}){try{const n=this.manager.get("TransitionManager"),a=this.manager.get("PageManager");let o,h,l=this.ignoreHashAction;this.emitter.emit("NAVIGATION_START",{oldHref:t,href:e,trigger:i,transitionName:r,scroll:s}),n.has(r)||(console.log(`[PJAX] transition name "${r}" doesn't exist, switching to the "default" transition`),r="default");try{this.transitionStart(),this.emitter.emit("PAGE_LOADING",{href:e,oldHref:t,trigger:i,scroll:s}),h=await a.load(t),o=await a.load(e),this.emitter.emit("PAGE_LOAD_COMPLETE",{newPage:o,oldPage:h,trigger:i,scroll:s}),h.dom instanceof Element||h.build(),o.build()}catch(t){console.warn("[PJAX] Page load error",t)}try{s=(await n.start(r,{oldPage:h,newPage:o,trigger:i,scroll:s,ignoreHashAction:l})).scroll}catch(t){console.warn("[PJAX] Transition error",t)}this.emitter.emit("NAVIGATION_END",{oldPage:h,newPage:o,trigger:i,transitionName:r,scroll:s})}catch(t){this.forceOnError?this.force(e):console.warn(t)}finally{this.transitionStop()}}onHover(t){let e=this.getLink(t);if(!e||!this.manager.has("PageManager"))return;const i=this.manager.get("PageManager");let r=h(this.getHref(e)),s=r.pathname;if(this.emitter.emit("ANCHOR_HOVER HOVER",t),!P(r.pathname,this.prefetchIgnore)&&(!i.has(s)||P(s,i.cacheIgnore)))try{i.load(r),this.emitter.emit("PREFETCH",t)}catch(t){console.warn("[PJAX] Prefetch error",t)}}onStateChange(t){this.go({href:window.location.href,trigger:"popstate",event:t})}initEvents(){!0!==this.prefetchIgnore&&(document.addEventListener("mouseover",this.onHover),document.addEventListener("touchstart",this.onHover)),document.addEventListener("click",this.onClick),window.addEventListener("popstate",this.onStateChange)}stopEvents(){!0!==this.prefetchIgnore&&(document.removeEventListener("mouseover",this.onHover),document.removeEventListener("touchstart",this.onHover)),document.removeEventListener("click",this.onClick),window.removeEventListener("popstate",this.onStateChange)}},t.Page=R,t.PageManager=class extends p{constructor(){super(),this.loading=new s}install(){this.pages=new o(this.app),this.cacheIgnore=this.config.cacheIgnore;let t=h().pathname;this.set(t,new R),t=null}get(t){return this.pages.get(t)}add(t){return this.pages.add(t),this}set(t,e){return this.pages.set(t,e),this}remove(t){return this.pages.remove(t),this}has(t){return this.pages.has(t)}clear(){return this.pages.clear(),this}get size(){return this.pages.size}keys(){return this.pages.keys()}async load(t=h()){let e,i,r=h(t),s=r.pathname;if(this.has(s)&&!P(s,this.cacheIgnore))return e=this.get(s),Promise.resolve(e);this.loading.has(s)?i=this.loading.get(s):(i=this.request(s),this.loading.set(s,i));let n=await i;if(this.loading.remove(s),e=new R(r,n),this.set(s,e),this.size>this.config.maxPages){let t=h(),e=this.keys(),i=u(t,e[0])?e[1]:e[0],r=this.get(i);r.unregister(),r=null,e=null,t=null,i=null}return e}async request(t){const e=new Headers(this.config.headers),i=window.setTimeout((()=>{window.clearTimeout(i);const e=new Error("Request Timed Out!");throw this.emitter.emit("TIMEOUT_ERROR",e,t),e}),this.config.timeout);try{let r=await fetch(t,{mode:"same-origin",method:"GET",headers:e,cache:"default",credentials:"same-origin"});if(window.clearTimeout(i),r.status>=200&&r.status<300)return await r.text();const s=new Error(r.statusText||""+r.status);throw this.emitter.emit("REQUEST_ERROR",s,t),s}catch(t){throw window.clearTimeout(i),t}}},t.Router=class extends p{constructor(t=[]){super(),this.routes=new s;for(let e of t)this.add(e)}add({path:t,method:e}){let i=this.parse(t);return this.routes.set(i,e),this}parsePath(t){if("string"==typeof t||t instanceof RegExp||Array.isArray(t))return A(t,[],{start:!1,end:!1});if("boolean"==typeof t)return t&&/.*/;throw"[Router] only regular expressions, strings, booleans and arrays of regular expressions and strings are accepted as paths."}isPath(t){return"string"==typeof t||t instanceof RegExp||"boolean"==typeof t||Array.isArray(t)}parse(t){let e=t,i={from:/.*/,to:/.*/};if(this.isPath(t))i={from:!0,to:t};else{if(!this.isPath(e.from)||!this.isPath(e.to))throw"[Router] path is neither a string, regular expression, or a { from, to } object.";i=Object.assign({},i,e)}let{from:r,to:s}=i;return{from:this.parsePath(r),to:this.parsePath(s)}}route(){if(this.manager.has("HistoryManager")){let t=this.manager.get("HistoryManager"),e=l(h((t.length>1?t.previous:t.current).url)),i=l(h());this.routes.forEach(((t,r)=>{let s=r.from,n=r.to;if("boolean"==typeof s&&"boolean"==typeof n)throw`[Router] path ({ from: ${s}, to: ${n} }) is not valid, remember paths can only be strings, regular expressions, or a boolean; however, both the from and to paths cannot be both booleans.`;let a=s,o=n;s instanceof RegExp&&s.test(e)&&(a=s.exec(e)),n instanceof RegExp&&n.test(i)&&(o=n.exec(i)),(Array.isArray(o)&&Array.isArray(a)||Array.isArray(o)&&0==a&&!n.test(e)||Array.isArray(a)&&0==o&&!s.test(i))&&t({from:a,to:o,path:{from:e,to:i}})}))}else console.warn("[Route] HistoryManager is missing.")}initEvents(){this.emitter.on("READY",this.route,this),this.emitter.on("CONTENT_REPLACED",this.route,this)}stopEvents(){this.emitter.off("READY",this.route,this),this.emitter.off("CONTENT_REPLACED",this.route,this)}},t.Service=p,t.ServiceManager=g,t.TRANSITION_REPLACE=x,t.TransitionManager=class extends p{constructor(t){super(),this._arg=t}install(){super.install();let t=this._arg&&this._arg.length?this._arg:this.config.transitions;this.transitions=new s([["default",x],["replace",x]].concat(t))}get(t){return this.transitions.get(t)}set(t,e){return this.transitions.set(t,e),this}add(t){return this.transitions.add(t),this}has(t){return this.transitions.has(t)}async start(t,e){let i=this.transitions.get(t),{oldPage:s,newPage:n,ignoreHashAction:a,trigger:o}=e;if(this.emitter.emit("TRANSITION_START",{transitionName:t,...e}),!("wrapper"in s)||!("wrapper"in n))throw`[TransitionManager] either oldPage or newPage aren't instances of the Page Class.\n ${{newPage:n,oldPage:s}}`;document.title=""+n.title;let h=s.wrapper,l=n.wrapper;if(!(h instanceof Node&&l instanceof Node))throw`[TransitionManager] the wrapper from the ${l instanceof Node?"current":"next"} page cannot be found. The wrapper must be an element that has the attribute ${r(this.config,"wrapperAttr")}.`;return i.init&&i?.init(e),this.emitter.emit("BEFORE_TRANSITION_OUT",e),i.out&&await new Promise((t=>{i.out.call(i,{...e,from:s,done:t})?.then(t)})),this.emitter.emit("AFTER_TRANSITION_OUT",e),await new Promise((t=>{h.insertAdjacentElement("beforebegin",l),this.emitter.emit("CONTENT_INSERT",e),t()})),await new Promise((t=>{h.remove(),h=null,l=null,this.emitter.emit("CONTENT_REPLACED",e),!a&&!/back|popstate|forward/.test(o)&&(e.scroll=b(e.scroll)),t()})),this.emitter.emit("BEFORE_TRANSITION_IN",e),i.in&&await new Promise((t=>{i.in.call(i,{...e,from:s,to:n,done:t})?.then(t)})),this.emitter.emit("AFTER_TRANSITION_IN",e),i.manualScroll||(!a&&!/back|popstate|forward/.test(o)&&(e.scroll=b(e.scroll)),window.scroll(e.scroll.x,e.scroll.y)),this.emitter.emit("TRANSITION_END",{transitionName:t,...e}),e}},t.changeState=m,t.clean=c,t.equal=u,t.getHash=t=>h(t).hash.slice(1),t.getHashedPath=l,t.hashAction=b,t.ignoreURLs=P,t.methodCall=n,t.newConfig=i,t.newCoords=f,t.newState=d,t.newURL=h,t.toAttr=r,Object.defineProperty(t,"__esModule",{value:!0})}));
