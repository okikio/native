"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class e{constructor(e){this.map=new Map(e)}getMap(){return this.map}get(e){return this.map.get(e)}keys(){return Array.from(this.map.keys())}values(){return Array.from(this.map.values())}set(e,t){return this.map.set(e,t),this}add(e){let t=this.size;return this.set(t,e),this}get size(){return this.map.size}get length(){return this.map.size}last(e=1){let t=this.keys()[this.size-e];return this.get(t)}delete(e){return this.map.delete(e)}remove(e){return this.map.delete(e),this}clear(){return this.map.clear(),this}has(e){return this.map.has(e)}entries(){return this.map.entries()}forEach(e,t){return this.map.forEach(e,t),this}[Symbol.iterator](){return this.entries()}}const t=({callback:e=(()=>{}),scope:t=null,name:s="event"})=>({callback:e,scope:t,name:s});class s extends e{constructor(e="event"){super(),this.name=e}}const r=e=>"object"==typeof e&&!Array.isArray(e)&&"function"!=typeof e;class i extends e{constructor(){super()}getEvent(e){let t=this.get(e);return t instanceof s?t:(this.set(e,new s(e)),this.get(e))}newListener(e,s,r){let i=this.getEvent(e);return i.add(t({name:e,callback:s,scope:r})),i}on(e,t,s){if(null==e||null==e)return this;"string"==typeof e&&(e=e.trim().split(/\s+/));let i,n,a=r(e),l=a?t:s;return a||(n=t),Object.keys(e).forEach((t=>{i=a?t:e[t],a&&(n=e[t]),this.newListener(i,n,l)}),this),this}removeListener(e,r,i){let n=this.get(e);if(n instanceof s&&r){let s=t({name:e,callback:r,scope:i});n.forEach(((e,t)=>{if(e.callback===s.callback&&e.scope===s.scope)return n.remove(t)}))}return n}off(e,t,s){if(null==e||null==e)return this;"string"==typeof e&&(e=e.trim().split(/\s+/));let i,n,a=r(e),l=a?t:s;return a||(n=t),Object.keys(e).forEach((t=>{i=a?t:e[t],a&&(n=e[t]),"function"==typeof n?this.removeListener(i,n,l):this.remove(i)}),this),this}once(e,t,s){if(null==e||null==e)return this;"string"==typeof e&&(e=e.trim().split(/\s+/));let i=r(e);return Object.keys(e).forEach((r=>{let n=i?r:e[r],a=i?e[r]:t,l=i?t:s,h=(...e)=>{a.apply(l,e),this.removeListener(n,h,l)};this.newListener(n,h,l)}),this),this}emit(e,...t){return null==e||null==e||("string"==typeof e&&(e=e.trim().split(/\s+/)),e.forEach((e=>{let r=this.get(e);r instanceof s&&r.forEach((e=>{let{callback:s,scope:r}=e;s.apply(r,t)}))}),this)),this}clear(){return((e,t,...s)=>{e.forEach((e=>{e[t](...s)}))})(this,"clear"),super.clear(),this}}exports.Event=s,exports.EventEmitter=i,exports.default=i,exports.isObject=r,exports.newListener=t;
