!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).emitter={})}(this,(function(e){"use strict";class t{constructor(e){this.map=new Map(e)}getMap(){return this.map}get(e){return this.map.get(e)}keys(){return Array.from(this.map.keys())}values(){return Array.from(this.map.values())}set(e,t){return this.map.set(e,t),this}add(e){let t=this.size;return this.set(t,e),this}get size(){return this.map.size}get length(){return this.map.size}last(e=1){let t=this.keys()[this.size-e];return this.get(t)}delete(e){return this.map.delete(e)}remove(e){return this.map.delete(e),this}clear(){return this.map.clear(),this}has(e){return this.map.has(e)}entries(){return this.map.entries()}forEach(e,t){return this.map.forEach(e,t),this}[Symbol.iterator](){return this.entries()}}const s=({callback:e=(()=>{}),scope:t=null,name:s="event"})=>({callback:e,scope:t,name:s});class r extends t{constructor(e="event"){super(),this.name=e}}const i=e=>"object"==typeof e&&!Array.isArray(e)&&"function"!=typeof e;class n extends t{constructor(){super()}getEvent(e){let t=this.get(e);return t instanceof r?t:(this.set(e,new r(e)),this.get(e))}newListener(e,t,r){let i=this.getEvent(e);return i.add(s({name:e,callback:t,scope:r})),i}on(e,t,s){if(null==e||null==e)return this;"string"==typeof e&&(e=e.trim().split(/\s+/));let r,n,l=i(e),a=l?t:s;return l||(n=t),Object.keys(e).forEach((t=>{r=l?t:e[t],l&&(n=e[t]),this.newListener(r,n,a)}),this),this}removeListener(e,t,i){let n=this.get(e);if(n instanceof r&&t){let r=s({name:e,callback:t,scope:i});n.forEach(((e,t)=>{if(e.callback===r.callback&&e.scope===r.scope)return n.remove(t)}))}return n}off(e,t,s){if(null==e||null==e)return this;"string"==typeof e&&(e=e.trim().split(/\s+/));let r,n,l=i(e),a=l?t:s;return l||(n=t),Object.keys(e).forEach((t=>{r=l?t:e[t],l&&(n=e[t]),"function"==typeof n?this.removeListener(r,n,a):this.remove(r)}),this),this}once(e,t,s){if(null==e||null==e)return this;"string"==typeof e&&(e=e.trim().split(/\s+/));let r=i(e);return Object.keys(e).forEach((i=>{let n=r?i:e[i],l=r?e[i]:t,a=r?t:s,o=(...e)=>{l.apply(a,e),this.removeListener(n,o,a)};this.newListener(n,o,a)}),this),this}emit(e,...t){return null==e||null==e||("string"==typeof e&&(e=e.trim().split(/\s+/)),e.forEach((e=>{let s=this.get(e);s instanceof r&&s.forEach((e=>{let{callback:s,scope:r}=e;s.apply(r,t)}))}),this)),this}clear(){return((e,t,...s)=>{e.forEach((e=>{e[t](...s)}))})(this,"clear"),super.clear(),this}}e.Event=r,e.EventEmitter=n,e.default=n,e.isObject=i,e.newListener=s,Object.defineProperty(e,"__esModule",{value:!0})}));
