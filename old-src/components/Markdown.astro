---
import { renderMarkdownWithFrontmatter } from '@astrojs/markdown-support';
import plugins from "@/markdown-plugins.js";

const { content, $scope } = Astro.props;
let html = null;

// This flow is only triggered if a user passes `<Markdown content={content} />`
if (content) {
  const { content: htmlContent } = await renderMarkdownWithFrontmatter(content, {
    mode: 'md',
    $: {
      scopedClassName: $scope
    },
    ...plugins
  });
  html = htmlContent;
}

/*
  If we have rendered `html` for `content`, render that
  Otherwise, just render the slotted content
*/
---
{html ? html : <slot />}